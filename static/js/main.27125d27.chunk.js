(this["webpackJsonpgallery-app"]=this["webpackJsonpgallery-app"]||[]).push([[0],{21:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(0),o=c.n(n),a=c(14),i=c.n(a),r=(c(21),c(4)),d=c(9),l=c(10),u=function(e){return{type:"SET_LOADING_USERS",payload:e}},h=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return{users:e.usersPage.users,activeUser:e.usersPage.activeUser}}));return Object(n.useEffect)((function(){e((function(e){e(u(!1)),fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(t){return e({type:"ADD_USERS",payload:t})}))}))}),[e]),Object(s.jsx)("header",{className:"header",children:Object(s.jsx)("div",{className:"users",children:Object(s.jsx)("nav",{className:"users__nav",children:Object(s.jsx)("ul",{className:"users__list",children:t.users.map((function(c){return Object(s.jsx)("li",{className:"users__list-item",onClick:function(){return e({type:"SET_ACTIVE_USER",payload:c.id})},children:Object(s.jsxs)(l.b,{to:"/user/".concat(c.id),className:t.activeUser===c.id?"user__list-link-active":"user__list-link",children:[" ",c.username]})},c.id)}))})})})})},j=function(){return{type:"SET_LOADED_ALBUMS_FALSE"}},b=function(){return{type:"SET_LOADED_PHOTOS_FALSE"}},O=c.p+"static/media/loaded.fedfc467.gif";var m=function(){return Object(s.jsx)("div",{className:"start",children:Object(s.jsx)("h1",{className:"start__loaded",children:Object(s.jsx)("img",{src:O,alt:"Loaded"})})})},p=function(){var e=Object(r.f)().userId,t=Object(d.b)(),c=Object(d.c)((function(e){return{albums:e.albums.albums,photos:e.albums.photos,isLoadedAlbums:e.albums.isLoadedAlbums,isLoadedPhotos:e.albums.isLoadedPhotos}})),o=function(e){return c.photos.filter((function(t){return e===t.albumId})).length};return Object(n.useEffect)((function(){return t((function(e){e(b()),fetch("https://jsonplaceholder.typicode.com/photos").then((function(e){return e.json()})).then((function(t){return e({type:"ADD_PHOTO",payload:t})}))})),t(function(e){return function(t){t(j()),fetch("https://jsonplaceholder.typicode.com/albums/?userId=".concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"ADD_ALBUMS",payload:e})}))}}(e)),function(){t(j()),t(b())}}),[t,e]),Object(s.jsx)(s.Fragment,{children:c.isLoadedAlbums&&c.isLoadedPhotos?Object(s.jsxs)("div",{className:"albums",children:[Object(s.jsx)("h1",{className:"albums__title",children:"List of albums"}),Object(s.jsx)("div",{className:"albums__items",children:c.albums.map((function(e){return Object(s.jsx)(l.b,{to:"/photos/".concat(e.id),children:Object(s.jsxs)("div",{className:"album__item",children:[Object(s.jsx)("img",{src:(t=e.id,c.photos.find((function(e){return t===e.albumId})).url),alt:e.title}),Object(s.jsxs)("div",{className:"album__item-content",children:[Object(s.jsx)("h2",{className:"content__count",children:o(e.id)}),Object(s.jsx)("p",{className:"content__desc",children:e.title})]})]},e.id)},e.id);var t}))})]}):Object(s.jsx)(m,{})})},_=c(3),f=function(){return{type:"SET_LOADING_FALSE"}},v=function(e,t,c){return{type:"SET_MODAL_ACTIVE",status:e,photoId:t,indexPhoto:c}},x=function(e){var t=function(){e.setModalActive(!1,e.id,e.indexPhotoActive)},c=function(e){(e.path||e.composedPath&&e.composedPath()).includes(n.current)||t()},n=o.a.useRef();return o.a.useEffect((function(){document.querySelector(".modal__wrapper").addEventListener("click",c)}),[]),Object(s.jsx)(s.Fragment,{children:e.modalActive&&Object(s.jsx)("div",{className:"modal__wrapper",children:Object(s.jsxs)("div",{className:"modal__window",ref:n,children:[Object(s.jsx)("div",{onClick:t,className:"btn__cancel"}),Object(s.jsx)("img",{src:e.url,alt:e.title}),Object(s.jsx)("div",{onClick:function(){e.indexPhotoActive>0&&e.setModalActive(!0,e.id-1,e.indexPhotoActive-1)},className:"btn__back"}),Object(s.jsx)("div",{onClick:function(){e.indexPhotoActive<e.photosLength-1&&e.setModalActive(!0,e.id+1,e.indexPhotoActive+1)},className:"btn__next"})]})})})},A=function(){var e=Object(r.f)().albumId,t=Object(r.e)(),c=Object(d.b)(),o=Object(d.c)((function(e){return{photos:e.photos.photos,isLoaded:e.photos.isLoaded,modalActive:e.photos.modalActive,fullPhoto:e.photos.fullPhoto,indexPhotoActive:e.photos.indexPhotoActive}})),a=o.photos.length;Object(n.useEffect)((function(){c(function(e){return function(t){t(f()),fetch("https://jsonplaceholder.typicode.com/photos?albumId=".concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"ADD_PHOTO",payload:e})}))}}(e))}),[c,e]);return Object(s.jsxs)(s.Fragment,{children:[o.isLoaded?Object(s.jsxs)("div",{className:"photos",children:[Object(s.jsx)("button",{onClick:function(){t.goBack()},className:"photos__btn",children:"Back"}),Object(s.jsx)("h1",{className:"photos__title",children:"List of photos in the album"}),Object(s.jsx)("div",{className:"photos__items",children:o.photos.map((function(e,t){return Object(s.jsx)("div",{className:"photos__item",onClick:function(){return c(v(!0,e.id,t))},children:Object(s.jsx)("img",{src:e.thumbnailUrl,alt:e.title})},e.id)}))})]}):Object(s.jsx)(m,{}),o.modalActive&&Object(s.jsx)(x,Object(_.a)(Object(_.a)({},o.fullPhoto),{},{modalActive:o.modalActive,setModalActive:function(e,t,s){return c(v(e,t,s))},indexPhotoActive:o.indexPhotoActive,photosLength:a}))]})},L=function(){return Object(s.jsx)("div",{className:"start",children:Object(s.jsx)("h1",{className:"start__title",children:"Select a user name"})})};var E=function(){return Object(s.jsxs)("div",{className:"wrapper",children:[Object(s.jsx)(h,{}),Object(s.jsx)(r.a,{path:"/",exact:!0,component:L}),Object(s.jsx)(r.a,{path:"/user/:userId",exact:!0,component:p}),Object(s.jsx)(r.a,{path:"/photos/:albumId",component:A})]})},S=c(11),P=c(24),N={users:[],isLoaded:!1,activeUser:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USERS":return Object(_.a)(Object(_.a)({},e),{},{users:t.payload,isLoaded:!0});case"SET_LOADING_USERS":return Object(_.a)(Object(_.a)({},e),{},{isLoaded:t.payload});case"SET_ACTIVE_USER":return Object(_.a)(Object(_.a)({},e),{},{activeUser:t.payload});default:return e}},D={photos:[],fullPhoto:null,isLoaded:!1,modalActive:!1,indexPhotoActive:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PHOTO":return Object(_.a)(Object(_.a)({},e),{},{photos:t.payload,isLoaded:!0});case"SET_LOADING_FALSE":return Object(_.a)(Object(_.a)({},e),{},{isLoaded:!1});case"SET_MODAL_ACTIVE":return Object(_.a)(Object(_.a)({},e),{},{fullPhoto:e.photos.find((function(e){return e.id===t.photoId})),modalActive:t.status,indexPhotoActive:t.indexPhoto});default:return e}},T={albums:[],photos:[],isLoadedAlbums:!1,isLoadedPhotos:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALBUMS":return Object(_.a)(Object(_.a)({},e),{},{albums:t.payload,isLoadedAlbums:!0});case"ADD_PHOTO":return Object(_.a)(Object(_.a)({},e),{},{photos:t.payload,isLoadedPhotos:!0});case"SET_LOADED_ALBUMS_FALSE":return Object(_.a)(Object(_.a)({},e),{},{isLoadedAlbums:!1});case"SET_LOADED_PHOTOS_FALSE":return Object(_.a)(Object(_.a)({},e),{},{isLoadedPhotos:!1});default:return e}},U=Object(S.c)({usersPage:y,albums:I,photos:g}),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||S.d,w=Object(S.e)(U,k(Object(S.a)(P.a)));i.a.render(Object(s.jsx)(l.a,{children:Object(s.jsx)(d.a,{store:w,children:Object(s.jsx)(E,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.27125d27.chunk.js.map