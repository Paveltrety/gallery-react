(this["webpackJsonpgallery-app"]=this["webpackJsonpgallery-app"]||[]).push([[0],{21:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var s=c(1),o=c(0),n=c.n(o),a=c(14),i=c.n(a),r=(c(21),c(4)),l=c(9),d=c(10),u=function(e){return{type:"SET_LOADING_USERS",payload:e}},h=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return{users:e.usersPage.users,activeUser:e.usersPage.activeUser}}));return Object(o.useEffect)((function(){e((function(e){e(u(!1)),fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(t){return e({type:"ADD_USERS",payload:t})}))}))}),[e]),Object(s.jsx)("header",{className:"header",children:Object(s.jsx)("div",{className:"users",children:Object(s.jsx)("nav",{className:"users__nav",children:Object(s.jsx)("ul",{className:"users__list",children:t.users.map((function(c){return Object(s.jsx)("li",{className:"users__list-item",onClick:function(){return e({type:"SET_ACTIVE_USER",payload:c.id})},children:Object(s.jsxs)(d.b,{to:"/user/".concat(c.id),className:t.activeUser===c.id?"user__list-link-active":"user__list-link",children:[" ",c.username]})},c.id)}))})})})})},j=c.p+"static/media/loaded.fedfc467.gif";var b=function(){return Object(s.jsx)("div",{className:"start",children:Object(s.jsx)("h1",{className:"start__loaded",children:Object(s.jsx)("img",{src:j,alt:"Loaded"})})})},m=function(){var e=Object(r.f)().userId,t=Object(l.b)(),c=Object(l.c)((function(e){return{albums:e.albums.albums,photos:e.albums.photos,isLoadedAlbums:e.albums.isLoadedAlbums,isLoadedPhotos:e.albums.isLoadedPhotos}})),n=function(e){var t;return null===(t=c.photos.find((function(t){return e===t.albumId})))||void 0===t?void 0:t.url};return Object(o.useEffect)((function(){return 0===c.photos.length&&t((function(e){fetch("https://jsonplaceholder.typicode.com/photos").then((function(e){return e.json()})).then((function(t){return e({type:"ADD_PHOTO",payload:t})}))})),t(function(e){return function(t){fetch("https://jsonplaceholder.typicode.com/albums/?userId=".concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"ADD_ALBUMS",payload:e})}))}}(+e)),function(){t({type:"SET_LOADED_ALBUMS_FALSE"})}}),[t,e,c.photos.length]),Object(s.jsx)(s.Fragment,{children:c.isLoadedAlbums&&c.isLoadedPhotos?Object(s.jsxs)("div",{className:"albums",children:[Object(s.jsx)("h1",{className:"albums__title",children:"List of albums"}),Object(s.jsx)("div",{className:"albums__items",children:c.albums.map((function(e){return Object(s.jsx)(d.b,{to:"/photos/".concat(e.id),children:Object(s.jsxs)("div",{className:"album__item",children:[Object(s.jsx)("img",{src:n(e.id),alt:e.title}),Object(s.jsxs)("div",{className:"album__item-content",children:[Object(s.jsx)("h2",{className:"content__count",children:(t=e.id,c.photos.filter((function(e){return t===e.albumId})).length)}),Object(s.jsx)("p",{className:"content__desc",children:e.title})]})]},e.id)},e.id);var t}))})]}):Object(s.jsx)(b,{})})},O=c(3),p=function(){return{type:"SET_LOADING_FALSE"}},_=function(e,t,c){return{type:"SET_MODAL_ACTIVE",status:e,photoId:t,indexPhoto:c}},f=function(e){var t=function(){e.setModalActive(!1,e.id,e.indexPhotoActive)},c=function(e){(e.path||e.composedPath&&e.composedPath()).includes(o.current)||t()};n.a.useEffect((function(){var e;null===(e=document.querySelector(".modal__wrapper"))||void 0===e||e.addEventListener("click",c)}),[]);var o=n.a.useRef(null);return Object(s.jsx)(s.Fragment,{children:e.modalActive&&Object(s.jsx)("div",{className:"modal__wrapper",children:Object(s.jsxs)("div",{className:"modal__window",ref:o,children:[Object(s.jsx)("div",{onClick:t,className:"btn__cancel"}),Object(s.jsx)("img",{src:e.url,alt:e.title}),Object(s.jsx)("div",{onClick:function(){e.indexPhotoActive>0&&e.setModalActive(!0,e.id-1,e.indexPhotoActive-1)},className:"btn__back"}),Object(s.jsx)("div",{onClick:function(){e.indexPhotoActive<e.photosLength-1&&e.setModalActive(!0,e.id+1,e.indexPhotoActive+1)},className:"btn__next"})]})})})},v=function(){var e=Object(r.f)().albumId,t=Object(r.e)(),c=Object(l.b)(),n=Object(l.c)((function(e){return{photosForAlbum:e.photos.photosForAlbum,isLoaded:e.photos.isLoaded,modalActive:e.photos.modalActive,fullPhoto:e.photos.fullPhoto,indexPhotoActive:e.photos.indexPhotoActive}})),a=n.photosForAlbum.length;Object(o.useEffect)((function(){c(function(e){return function(t){t(p()),fetch("https://jsonplaceholder.typicode.com/photos?albumId=".concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"ADD_PHOTO_FOR_ALBUM",payload:e})}))}}(+e))}),[c,e]);return Object(s.jsxs)(s.Fragment,{children:[n.isLoaded?Object(s.jsxs)("div",{className:"photos",children:[Object(s.jsx)("button",{onClick:function(){t.goBack()},className:"photos__btn",children:"Back"}),Object(s.jsx)("h1",{className:"photos__title",children:"List of photos in the album"}),Object(s.jsx)("div",{className:"photos__items",children:n.photosForAlbum.map((function(e,t){return Object(s.jsx)("div",{className:"photos__item",onClick:function(){return c(_(!0,e.id,t))},children:Object(s.jsx)("img",{src:e.thumbnailUrl,alt:e.title})},e.id)}))})]}):Object(s.jsx)(b,{}),n.modalActive&&Object(s.jsx)(f,Object(O.a)(Object(O.a)({},n.fullPhoto),{},{modalActive:n.modalActive,setModalActive:function(e,t,s){return c(_(e,t,s))},indexPhotoActive:n.indexPhotoActive,photosLength:a}))]})},A=function(){return Object(s.jsx)("div",{className:"start",children:Object(s.jsx)("h1",{className:"start__title",children:"Select a user name"})})};var x=function(){return Object(s.jsxs)("div",{className:"wrapper",children:[Object(s.jsx)(h,{}),Object(s.jsx)(r.a,{path:"/",exact:!0,component:A}),Object(s.jsx)(r.a,{path:"/user/:userId",exact:!0,component:m}),Object(s.jsx)(r.a,{path:"/photos/:albumId",component:v})]})},L=c(11),E=c(24),S={users:[],isLoaded:!1,activeUser:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USERS":return Object(O.a)(Object(O.a)({},e),{},{users:t.payload,isLoaded:!0});case"SET_LOADING_USERS":return Object(O.a)(Object(O.a)({},e),{},{isLoaded:t.payload});case"SET_ACTIVE_USER":return Object(O.a)(Object(O.a)({},e),{},{activeUser:t.payload});default:return e}},N={photosForAlbum:[],fullPhoto:null,isLoaded:!1,modalActive:!1,indexPhotoActive:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PHOTO_FOR_ALBUM":return Object(O.a)(Object(O.a)({},e),{},{photosForAlbum:t.payload,isLoaded:!0});case"SET_LOADING_FALSE":return Object(O.a)(Object(O.a)({},e),{},{isLoaded:!1});case"SET_MODAL_ACTIVE":return Object(O.a)(Object(O.a)({},e),{},{fullPhoto:e.photosForAlbum.find((function(e){return e.id===t.photoId})),modalActive:t.status,indexPhotoActive:t.indexPhoto});default:return e}},D={albums:[],photos:[],isLoadedAlbums:!1,isLoadedPhotos:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALBUMS":return Object(O.a)(Object(O.a)({},e),{},{albums:t.payload,isLoadedAlbums:!0});case"ADD_PHOTO":return Object(O.a)(Object(O.a)({},e),{},{photos:t.payload,isLoadedPhotos:!0});case"SET_LOADED_ALBUMS_FALSE":return Object(O.a)(Object(O.a)({},e),{},{isLoadedAlbums:!1,albums:[]});case"SET_LOADED_PHOTOS_FALSE":return Object(O.a)(Object(O.a)({},e),{},{isLoadedPhotos:!1,albums:[]});default:return e}},T=Object(L.c)({usersPage:P,albums:g,photos:y}),I=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d,U=Object(L.e)(T,I(Object(L.a)(E.a)));i.a.render(Object(s.jsx)(d.a,{children:Object(s.jsx)(l.a,{store:U,children:Object(s.jsx)(x,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.bab65420.chunk.js.map